<!-- üìä Statistiques -->
<div class="stats">
  <mat-card>Total : {{ total }}</mat-card>
  <mat-card>En cours : {{ progress }}</mat-card>
  <mat-card>Termin√©es : {{ done }}</mat-card>
</div>

<!-- üîç Filtre & tri -->
<mat-card class="toolbar">
  <mat-select
    placeholder="Filtrer par statut"
    [(value)]="filter"
    (selectionChange)="setFilter(filter)">
    <mat-option value="">Toutes</mat-option>
    <mat-option value="EN_COURS">En cours</mat-option>
    <mat-option value="TERMINEE">Termin√©es</mat-option>
  </mat-select>

  <button mat-raised-button color="primary" (click)="sortByName()">
    Trier par nom
  </button>
</mat-card>

<!-- ‚ûï Ajouter t√¢che -->
<mat-card class="add-card">
  <h2>‚ûï Ajouter une t√¢che</h2>
  <input placeholder="Titre" [(ngModel)]="newTask.title">
  <input placeholder="Description" [(ngModel)]="newTask.description">
  <button mat-raised-button color="accent" (click)="addTask()">Ajouter</button>
</mat-card>

<!-- üìã Liste des t√¢ches -->
<div *ngIf="tasks.length === 0" class="no-task">
  Aucune t√¢che pour le moment
</div>

<mat-card *ngFor="let task of tasks" class="task-card">
  <div class="task-header">
    <h3>{{ task.title }}</h3>
    <span [class.done]="task.status==='TERMINEE'"
          [class.pending]="task.status==='EN_COURS'">
      {{ task.status }}
    </span>
  </div>

  <p>{{ task.description }}</p>

  <div class="actions">
    <button mat-button color="primary"
            *ngIf="task.status==='EN_COURS'"
            (click)="finish(task._id!)">
      Terminer
    </button>

    <button mat-button color="warn"
            (click)="deleteTask(task._id!)">
      Supprimer
    </button>
  </div>
</mat-card>
